<div class="container">

    <div class="article-index">
      <div class="article-title">
        <h3><%= @article.title %></h3>
      </div>

      <%= @article.content %>

      <div class="article-info">
        <p><%= @article.category %></p>
        <p><%= @article.created_at %></p>
      </div>

      <div class="article-comments">
        <% if @article.comments.present? %>
          <p>Lire les <%= @article.comments.count() %> commentaires <i class="fas fa-sort-down"></i></p>

          <% @article.comments.each do |comment| %>
            <div class="comment-container">

              <div class="comment-up">
                <p class="comment-user"><%= comment.user.username %></p>
              </div>

              <div class="comment-down">
                <p class="comment-content"><%= comment.content %></p>
                <p class="btn btn-answer">Répondre</p>
              </div>
            </div>

            <% if comment.answers.present? %>
              <div class="article-answers">
                <p><%=comment.answers.count()%> réponses  <i class="fas fa-sort-down"></i></p>

                <% comment.answers.each do |answer| %>
                  <div class="answer-container">
                    <div class="answer-up">
                      <p class="comment-user"><%= answer.user.username %></p>
                    </div>

                    <div class="answer-down">
                      <p class="comment-content"><%= answer.content %></p>
                      <p class="btn btn-answer">Répondre</p>
                    </div>
                  </div>
                <% end %>
              </div>
            <% end %>
          <% end %>
        <% else %>
        <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">
Ajouter un commentaire
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLabel">Ajouter un commentaire</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      <%= render 'layouts/comment-form' %>
    </div>
  </div>
</div>
</div>
        <% end %>
      </div>


    </div>
</div>



<%= link_to 'Back', articles_path %>
